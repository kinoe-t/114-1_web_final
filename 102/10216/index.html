<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¬ä½ çš„çµ¦çµ¦ç¨‹åº¦ - è±ªè¯å…¨å½©é›™åœ–ç‰ˆ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        /* é™ä½é®®è±”åº¦çš„ç²‰å½©è‰²ç³»å®šç¾© */
        :root {
            --rb-red: #ffb3ba;
            --rb-orange: #ffdfba;
            --rb-yellow: #ffffba;
            --rb-green: #baffc9;
            --rb-blue: #bae1ff;
            --rb-purple: #e0bbff;
        }

        * {
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><text y="24" font-size="24">ğŸŒˆ</text></svg>'), auto !important;
            box-sizing: border-box;
        }

        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: "PingFang TC", "Microsoft JhengHei", sans-serif;
        }

        /* æ»¿ç‰ˆå‹•æ…‹èƒŒæ™¯ */
        #main-capture-area {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            width: 100%;
            background: linear-gradient(-45deg, var(--rb-red), var(--rb-orange), var(--rb-yellow), var(--rb-green), var(--rb-blue), var(--rb-purple));
            background-size: 400% 400%;
            animation: rainbowFlow 15s ease infinite;
            padding: 20px;
        }

        @keyframes rainbowFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* æ¸¬é©—å¡ç‰‡è¨­è¨ˆ */
        #quiz-card {
            background: rgba(255, 255, 255, 0.98);
            padding: 40px;
            border-radius: 45px;
            box-shadow: 0 25px 80px rgba(0,0,0,0.1);
            max-width: 500px;
            width: 100%;
            text-align: center;
            border: 8px solid transparent;
            border-image: linear-gradient(45deg, var(--rb-red), var(--rb-purple)) 1;
            position: relative;
        }

        /* æ¨™é¡Œå€ï¼šğŸŒˆå›ºå®šï¼Œæ–‡å­—æµå‹• */
        .title-group {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .emoji-static {
            font-size: 2.2rem;
            flex-shrink: 0;
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.1));
        }

        h1 {
            font-size: 1.8rem;
            margin: 0;
            background: linear-gradient(to right, #ff8b8b, #a094ff, #ff8b8b);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: textMove 4s linear infinite;
            font-weight: 900;
        }

        @keyframes textMove { to { background-position: 200% center; } }

        /* æ¸¬é©—å…ƒä»¶ */
        .progress-box {
            width: 100%; height: 12px; background: #f0f0f0;
            border-radius: 20px; margin-bottom: 20px; overflow: hidden;
        }

        .progress-fill {
            height: 100%; width: 0%;
            background: linear-gradient(90deg, var(--rb-red), var(--rb-purple));
            transition: width 0.4s ease;
        }

        .q-text {
            font-size: 1.3rem; font-weight: 800; color: #444;
            margin-bottom: 30px; min-height: 4rem; display: flex; align-items: center; justify-content: center;
        }

        .opt-btn {
            width: 100%; background: #fff; border: 2px solid #f8f8f8;
            padding: 16px; border-radius: 18px; font-size: 1.1rem;
            font-weight: 600; margin-bottom: 15px; transition: 0.2s;
            color: #555; cursor: pointer;
            box-shadow: 0 4px 0 #f0f0f0;
        }

        .opt-btn:hover { border-color: var(--rb-purple); transform: translateY(-2px); box-shadow: 0 6px 0 #e8e8e8; }
        .opt-btn:active { transform: translateY(2px); box-shadow: none; }

        /* çµæœå€ */
        #result-section { display: none; }
        .score-display { font-size: 6.5rem; font-weight: 900; margin: 5px 0; color: #555; letter-spacing: -3px; }
        .desc-text { 
            background: #fff; padding: 25px; border-radius: 25px;
            text-align: left; border: 2px dashed #eee; margin-bottom: 30px;
            font-size: 1.1rem; line-height: 1.7; color: #666;
        }

        .btn-stack { display: flex; flex-direction: column; gap: 15px; }

        .btn-main {
            background: linear-gradient(45deg, #a8e6cf, #dcedc1); color: #444; padding: 20px;
            border-radius: 20px; font-size: 1.15rem; font-weight: bold; border: none;
            cursor: pointer; box-shadow: 0 8px 20px rgba(0,0,0,0.05);
        }

        .btn-sub {
            background: linear-gradient(45deg, #f7d9d9, #e0bbff); color: #555; padding: 18px;
            border-radius: 20px; font-size: 1.1rem; font-weight: bold; border: none; cursor: pointer;
        }

        .btn-retry { background: #eee; color: #999; border: none; padding: 12px; border-radius: 15px; cursor: pointer; }
    </style>
</head>
<body>

<div id="main-capture-area">
    <div id="quiz-card">
        <div class="title-group">
            <span class="emoji-static">ğŸŒˆ</span>
            <h1 id="title">æ¸¬ä½ çš„çµ¦çµ¦ç¨‹åº¦</h1>
            <span class="emoji-static">ğŸŒˆ</span>
        </div>
        
        <div id="quiz-section">
            <div class="progress-box"><div class="progress-fill" id="pb"></div></div>
            <p id="counter" style="font-weight:bold; color:#ccc;">Question 1 / 20</p>
            <div class="q-text" id="q-text">è¼‰å…¥ä¸­...</div>
            <div id="opt-list"></div>
        </div>

        <div id="result-section">
            <p style="font-weight:900; color:#bbb; letter-spacing: 2px;">é‘‘å®šçµæœå ±å‘Š</p>
            <div class="score-display" id="score-val">0%</div>
            <div class="desc-text" id="score-desc"></div>
            <div class="btn-stack">
                <button class="btn-main" onclick="saveFullImage()">ğŸ“¸ ä¸‹è¼‰å…¨å½©èƒŒæ™¯åˆ†äº«åœ–</button>
                <button class="btn-sub" onclick="saveCardOnly()">ğŸ–¼ï¸ ä¸‹è¼‰ç´”å¡ç‰‡çµæœåœ–</button>
                <button class="btn-retry" onclick="location.reload()">é‡æ–°é‘‘å®š ğŸ”„</button>
            </div>
        </div>
    </div>
</div>

<script>
    const quizData = [
        { q: "1. å¦‚æœä½ æœ€å¥½çš„æœ‹å‹å°ä½ å‡ºæ«ƒï¼Œä½ æœƒï¼š", a: ["ç‚ºä»–æ„Ÿåˆ°é«˜èˆˆ", "åˆ†äº«ä½ ä¹Ÿæ›¾è¢«åŒæ€§å¸å¼•é", "ä¿æŒè·é›¢", "è¡¨é¢å¤§æ–¹ï¼Œå…§å¿ƒå°·å°¬"], s: [8, 10, 0, 4] },
        { q: "2. ä½ å¤šæ•¸çš„æœ‹å‹æ˜¯åŒæ€§é‚„æ˜¯ç•°æ€§ï¼Ÿ", a: ["æ¸…ä¸€è‰²åŒæ€§æœ‹å‹", "ç•°æ€§æœ‹å‹æ¯”ä¾‹å‡ºå¥‡é«˜", "ç”·å¥³å„åŠ", "æˆ‘ç¨ä¾†ç¨å¾€"], s: [10, 8, 5, 2] },
        { q: "3. çœ‹åˆ°å…©ä½å¸¥å“¥åœ¨è¡—ä¸Šè¦ªå»ï¼Œä½ çš„ç¬¬ä¸€åæ‡‰ï¼Ÿ", a: ["å…§å¿ƒå°–å«ï¼šå¥½é¦™ï¼", "æ„Ÿè¦ºä¸–ç•Œå……æ»¿æ„›", "æ²’æ„Ÿè¦ºï¼Œå¾ˆå¹³å¸¸", "è¦ºå¾—è§€æ„Ÿä¸ä½³"], s: [10, 8, 6, 0] },
        { q: "4. å°æ–¼ã€Œç™½è¥ªé…æ¶¼é‹ã€æˆ–ã€Œç·Šèº«å–®è»Šè¤²ã€çš„çœ‹æ³•ï¼Ÿ", a: ["åœˆå…§äººçš„æ™‚å°šè¨Šè™Ÿå§", "èº«æå¥½å°±å®Œå…¨å¯ä»¥", "é€™ç©¿æ­æ˜¯ç½é›£", "ç¾åœ¨æµè¡Œä»€éº¼å°±ç©¿ä»€éº¼"], s: [10, 8, 1, 5] },
        { q: "5. ä½ å°è‡ªå·±çš„çš®è†šä¿é¤Šè¦æ±‚åˆ°ä»€éº¼ç¨‹åº¦ï¼Ÿ", a: ["ä¿é¤Šå“æˆå †ï¼Œæ­¥é©Ÿç¹ç‘£", "æ³¨é‡é˜²æ›¬æˆ–ç‰¹å®šä¿é¤Š", "ç°¡å–®ä¹¾æ·¨å°±å¥½", "å®Œå…¨ä¸ä¿®é‚Šå¹…"], s: [10, 7, 4, 0] },
        { q: "6. ç•¶ä½ çœ‹åˆ°ä¸€ä½é•·ç›¸å‡ºçœ¾çš„åŒæ€§æ™‚ï¼š", a: ["æƒ³æ“æœ‰ä»–ï¼Œæˆ–è€…æˆç‚ºä»–", "ç ”ç©¶ä»–çš„é…ä»¶è·Ÿå“å‘³", "å–®ç´”æ¬£è³ä¸€ä¸‹", "æ ¹æœ¬æ²’æ³¨æ„"], s: [10, 9, 5, 1] },
        { q: "7. ä½ æ˜¯å¦æ›¾è¢«å•éã€Œä½ æ˜¯ Gay å—ã€ï¼Ÿ", a: ["ç¶“å¸¸è¢«å•ï¼Œæˆ‘éƒ½æ‡¶å¾—è§£é‡‹", "å¶çˆ¾æœƒè¢«æ‡·ç–‘", "å¾ä¾†æ²’æœ‰é", "å¤§å®¶éƒ½è¦ºå¾—æˆ‘æ˜¯é‹¼éµ"], s: [10, 7, 2, 0] },
        { q: "8. å°æ–¼ã€Œé™¤æ¯›ã€å™´é¦™æ°´ã€ä¿®çœ‰æ¯›ã€ï¼š", a: ["åŸºæœ¬ç¦®è²Œï¼Œæˆ‘æœ‰æ‰“ç†", "æœƒåšå…¶ä¸­ä¸€å…©é …", "çŸ¥é“æœ‰äººæœƒåšä½†è‡ªå·±æ‡¶", "ç”·äººä¸éœ€è¦é€™äº›"], s: [10, 7, 3, 0] },
        { q: "9. çœ‹åˆ°è‚Œè‚‰ç™¼é”çš„åŒæ€§ï¼Œä½ ç¬¬ä¸€çœ¼çœ‹ï¼Ÿ", a: ["èƒ¸è…¹è‚Œæˆ–è‡€éƒ¨", "çœ‹ä»–çš„ç©¿æ­è³ªæ„Ÿ", "çœ‹è‡‰", "ä¸æœƒç›¯è‘—çœ‹"], s: [10, 8, 5, 1] },
        { q: "10. ç™¼é™å‹•æ™‚ï¼Œä½ æœƒåœ¨æ„æ’ç‰ˆæˆ–æ¿¾é¡å—ï¼Ÿ", a: ["å¼·çƒˆæ’ç‰ˆå¼·è¿«ç—‡", "æœƒç¨å¾®èª¿è‰²ä¸€ä¸‹", "éš¨ä¾¿æ‹éš¨ä¾¿ç™¼", "æˆ‘ä¸ç”¨ç¤¾ç¾¤åª’é«”"], s: [10, 7, 3, 0] },
        { q: "11. èŠå¤©å¸¸ä½¿ç”¨çš„èªåŠ©è©ï¼ˆæƒ¹ã€ğŸ’…ã€è›¤ã€å“ˆï¼‰ï¼Ÿ", a: ["å¸¸ç”¨ï¼Œé€™å«é¢¨æ ¼", "å¶çˆ¾è·Ÿé¢¨ç”¨ä¸€ä¸‹", "å®Œå…¨ä¸ç”¨ï¼Œå¾ˆå°·å°¬", "æˆ‘åªå‚³è²¼åœ–"], s: [10, 6, 1, 3] },
        { q: "12. ä½ å°ã€Œè‡ªæ‹ã€è§’åº¦æ˜¯å¦æœ‰è‡ªå·±çš„å …æŒï¼Ÿ", a: ["çŸ¥é“è‡ªå·±å“ªå€‹è§’åº¦æœ€ç¾", "æ‹å¾ˆå¤šå¼µæ‰é¸ä¸€å¼µ", "éš¨ä¾¿æ‹ä¸€å¼µå°±å¥½", "æˆ‘è¨å­æ‹ç…§"], s: [10, 8, 4, 0] },
        { q: "13. æ›¾å¹»æƒ³éèˆ‡åŒæ€§è«‡æˆ€æ„›æˆ–æœ‰è‚¢é«”äº’å‹•å—ï¼Ÿ", a: ["ç¶“å¸¸å¹»æƒ³ï¼Œç”šè‡³å·²ç¶“ç™¼ç”Ÿ", "å¶çˆ¾æœƒå¥½å¥‡é‚£ç¨®æ„Ÿè¦º", "å®Œå…¨ç„¡æ³•æ¥å—", "æƒ³éä½†ä¸æ•¢åš"], s: [10, 7, 0, 4] },
        { q: "14. å¦‚æœè¢«åŒæ€§é–‹ç©ç¬‘åœ°å‘Šç™½ï¼š", a: ["å¾ˆé–‹å¿ƒï¼Œç”šè‡³æƒ³é€²ä¸€æ­¥èŠ", "ç¦®è²Œå›æ‡‰ï¼Œä½†å¿ƒè£¡ç«Šå–œ", "è¦ºå¾—å¥½ç©ï¼Œä¸æœƒç•¶çœŸ", "æ„Ÿåˆ°å°·å°¬ä¸”æƒ³é€ƒè·‘"], s: [10, 8, 5, 0] },
        { q: "15. å°æ–¼ã€Œç”·åŒå¿—é›»å½±æˆ– BL å½±é›†ã€çš„æ¥å—åº¦ï¼Ÿ", a: ["è¶…æ„›çœ‹ï¼ŒåŠ‡æƒ…è¶…é¦™", "å¥½çœ‹çš„è©±æœƒçœ‹ï¼Œä¸åˆ†é¡Œæ", "è½éä½†æ²’çœ‹é", "éå¸¸åæ„Ÿ"], s: [10, 8, 4, 0] },
        { q: "16. çœ‹åˆ°å¥½å‹ç©¿å¾—å¾ˆé†œï¼Œä½ æœƒï¼š", a: ["æ¯’èˆŒå»ºè­°æˆ–å¹«ä»–é‡æ–°æ­é…", "ç›´æ¥é–‹ç©ç¬‘èªªå¾ˆé†œ", "ä¸èªªè©±ï¼Œé‚£æ˜¯ä»–çš„è‡ªç”±", "æˆ‘è¦ºå¾—ä»–ç©¿ä»€éº¼éƒ½å¥½"], s: [10, 7, 2, 5] },
        { q: "17. æ‰‹æ©Ÿè£¡æ˜¯å¦æœ‰ä»»ä½•äº¤å‹è»Ÿé«”ï¼Ÿ", a: ["æœ‰ï¼Œè€Œä¸”æ˜¯åœˆå…§å¸¸ç”¨çš„", "æœ‰ Tinder ç­‰ä¸€èˆ¬è»Ÿé«”", "ä»¥å‰æœ‰é", "å®Œå…¨æ²’æœ‰"], s: [10, 8, 5, 0] },
        { q: "18. å°æ–¼ã€Œç²¾ç·»æ—©åˆé¤ã€æˆ–ã€Œè³ªæ„Ÿå’–å•¡å»³ã€ï¼š", a: ["å¿…å»æ‹ç…§æ‰“å¡ï¼Œæ²’æŠµæŠ—åŠ›", "å¯ä»¥å»ï¼Œä½†ä¸»è¦æ˜¯ç‚ºäº†åƒ", "é‚£æ˜¯æµªè²»éŒ¢", "å–œæ­¡è·¯é‚Šæ”¤"], s: [10, 6, 1, 0] },
        { q: "19. ç™¼ç¾æœ‰äººåœ¨å·çœ‹ä½ çš„æ™‚å€™ï¼Œä½ çš„ç›´è¦ºæ˜¯ï¼š", a: ["æˆ‘ä»Šå¤©ä¸€å®šå¾ˆå¸å¼•äºº", "æˆ‘æ˜¯ä¸æ˜¯ç©¿å¾—å¾ˆæ€ªï¼Ÿ", "ä»–åœ¨çœ‹åˆ¥çš„åœ°æ–¹å§", "çªå›å»"], s: [10, 7, 4, 1] },
        { q: "20. ä½ è¦ºå¾—è‡ªå·±é€™è¼©å­ã€Œæ„›ä¸ŠåŒæ€§ã€çš„å¯èƒ½æ€§ï¼Ÿ", a: ["100%ï¼Œæˆ‘å·²ç¶“æ˜¯äº†", "50%ï¼Œä¸æ’é™¤ä»»ä½•å¯èƒ½", "10%ï¼Œæ©Ÿæœƒæ¸ºèŒ«", "0%ï¼Œé‹¼éµä¹‹é­‚"], s: [10, 8, 3, 0] }
    ];

    let currentIdx = 0, totalScore = 0;

    function renderQuestion() {
        const q = quizData[currentIdx];
        document.getElementById('q-text').innerText = q.q;
        document.getElementById('counter').innerText = `ç¬¬ ${currentIdx + 1} / 20 é¡Œ`;
        const list = document.getElementById('opt-list');
        list.innerHTML = '';
        q.a.forEach((opt, i) => {
            const btn = document.createElement('button');
            btn.className = 'opt-btn';
            btn.innerText = opt;
            btn.onclick = () => { totalScore += q.s[i]; currentIdx++; currentIdx < 20 ? renderQuestion() : showResult(); };
            list.appendChild(btn);
        });
        document.getElementById('pb').style.width = (currentIdx / 20 * 100) + "%";
    }

    function showResult() {
        document.getElementById('quiz-section').style.display = 'none';
        document.getElementById('result-section').style.display = 'block';
        const finalP = Math.round(totalScore / 2);
        document.getElementById('score-val').innerText = finalP + "%";
        
        let d = finalP >= 90 ? "<b>ã€å¤©é¸ä¹‹çµ¦ã€‘</b>ğŸŒˆ ä½ æ˜¯å½©è™¹æœ¬è™¹ï¼ä½ çš„ç¾æ„Ÿèˆ‡æ°£å ´ç°¡ç›´æ˜¯åœˆå…§çš„é ‚ç´šé›·é”æƒæå°è±¡ï¼" : finalP >= 70 ? "<b>ã€å½©è™¹å„ªç­‰ç”Ÿã€‘</b>âœ¨ æ‡‚ç”Ÿæ´»ä¸”å¿ƒæ€ç´°è†©ï¼Œå°å¤šå…ƒæ–‡åŒ–æœ‰å¤©ç„¶çš„å…±é³´ã€‚" : finalP >= 40 ? "<b>ã€æ½›åŠ›è‚¡ã€‘</b>ğŸŒ¥ï¸ æ“æœ‰åŒ…å®¹ä¸”æ„Ÿæ€§çš„éˆé­‚ï¼Œæ˜¯å€‹æº«æš–çš„äººã€‚" : "<b>ã€é‹¼éµå®ˆè­·è€…ã€‘</b>ğŸ›¡ï¸ ç›´åº¦è¶…æ¨™ï¼ç”Ÿæ´»ä¸­å¹¾ä¹æ²’ä»»ä½•çµ¦çµ¦ç‰¹è³ªã€‚";
        document.getElementById('score-desc').innerHTML = d;

        // --- è±ªè¯å¤§ç¯„åœå™´ç´™å±‘ ---
        const end = Date.now() + 2500;
        const rainbowColors = ['#ffb3ba', '#ffdfba', '#ffffba', '#baffc9', '#bae1ff', '#e0bbff'];

        (function frame() {
            // å·¦å´å™´å°„
            confetti({ particleCount: 10, angle: 60, spread: 70, origin: { x: 0, y: 1 }, colors: rainbowColors });
            // å³å´å™´å°„
            confetti({ particleCount: 10, angle: 120, spread: 70, origin: { x: 1, y: 1 }, colors: rainbowColors });
            // ä¸­å¤®ç‘è½
            confetti({ particleCount: 5, spread: 50, origin: { y: 0.7 }, colors: rainbowColors });

            if (Date.now() < end) requestAnimationFrame(frame);
        }());
    }

    // æˆªåœ–ä¸‹è¼‰ - å…¨å½©èƒŒæ™¯
    function saveFullImage() {
        const target = document.getElementById('main-capture-area');
        html2canvas(target, { scale: 2, useCORS: true }).then(canvas => {
            const link = document.createElement('a');
            link.download = 'Rainbow_Full_Share.png';
            link.href = canvas.toDataURL();
            link.click();
        });
    }

    // æˆªåœ–ä¸‹è¼‰ - ç´”å¡ç‰‡ (é€æ˜èƒŒæ™¯)
    function saveCardOnly() {
        const target = document.getElementById('quiz-card');
        html2canvas(target, { scale: 2, useCORS: true, backgroundColor: null }).then(canvas => {
            const link = document.createElement('a');
            link.download = 'Rainbow_Card_Only.png';
            link.href = canvas.toDataURL();
            link.click();
        });
    }

    renderQuestion();
</script>
</body>
</html>