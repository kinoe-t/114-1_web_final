<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>斑馬求籤處 - 台灣味御神籤</title>
    <style>
        :root {
            --shrine-red: #b33e3e;
            --gold: #d4af37;
            --paper: #fdfaf2;
            --zebra-black: #1a1a1a;
        }

        body,
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: "Hiragino Mincho ProN", "MS Mincho", "Microsoft JhengHei", serif;
            background-color: #000;
            /* 2. 設定背景圖片路徑 */
            background: url('bg.webp') no-repeat center center;

            /* 3. 核心：讓圖片自動縮放以填滿整個螢幕，不留白邊 */
            background-size: cover;

            /* 4. 防止圖片在縮放時產生位移（可選） */
            background-attachment: fixed;
        }

        /* 背景：使用神社風格圖片，並稍作調亮 */
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.3)),
                url('https://images.unsplash.com/photo-1542475141-8693c78477ed?q=80&w=2070&auto=format&fit=crop') no-repeat center center;
            /* 神社風格圖片 */
            background-size: cover;
            filter: brightness(0.95);
            /* 稍微調亮 */
            z-index: -1;
            transition: transform 0.8s ease-out;
        }

        /* 斑馬神社裝飾邊框 */
        .overlay-frame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            border: 12px solid rgba(179, 62, 62, 0.6);
            box-sizing: border-box;
            z-index: 5;
        }

        .shrine-banner {
            position: absolute;
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 40px;
            border: 3px solid var(--zebra-black);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3), 0 0 0 3px var(--gold);
            text-align: center;
            z-index: 10;
        }

        .shrine-banner h1 {
            margin: 0;
            font-size: 1.8rem;
            letter-spacing: 12px;
            color: var(--zebra-black);
            font-weight: 900;
            text-shadow: 1px 1px 0px white;
        }

        .instruction {
            position: absolute;
            bottom: 8%;
            width: 100%;
            text-align: center;
            color: white;
            font-size: 1.4rem;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.9), 2px 2px 5px rgba(0, 0, 0, 0.5);
            letter-spacing: 8px;
            animation: breathe 2.5s infinite ease-in-out;
            z-index: 6;
        }

        @keyframes breathe {

            0%,
            100% {
                opacity: 0.5;
                transform: scale(0.95);
            }

            50% {
                opacity: 1;
                transform: scale(1.02);
            }
        }

        /* 籤詩結果彈窗 */
        #result-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
            cursor: pointer;
        }

        .omikuji-card {
            width: 300px;
            background: var(--paper);
            padding: 35px 25px;
            border: 2px solid #333;
            box-shadow: 0 0 50px rgba(212, 175, 55, 0.6);
            transform: scale(0.7);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            cursor: default;
            background-image: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
        }

        #result-overlay.active .omikuji-card {
            transform: scale(1);
            opacity: 1;
        }

        .card-decoration {
            position: absolute;
            top: 8px;
            left: 8px;
            right: 8px;
            bottom: 8px;
            border: 4px double var(--shrine-red);
            pointer-events: none;
        }

        .luck-rank {
            font-size: 3.5rem;
            color: var(--shrine-red);
            font-weight: bold;
            margin: 15px 0;
            border-bottom: 3px solid var(--shrine-red);
            padding: 0 15px;
        }

        .verse-container {
            margin: 25px 0;
            height: 200px;
            writing-mode: vertical-rl;
            font-size: 1.3rem;
            line-height: 2.2;
            color: #222;
            font-weight: 500;
        }

        .food-box {
            margin-top: 10px;
            background: rgba(238, 235, 224, 0.8);
            padding: 12px;
            border-radius: 4px;
            width: 100%;
            box-sizing: border-box;
            border: 1px solid #ccc;
        }

        .food-label {
            font-size: 0.8rem;
            color: #777;
            margin-bottom: 5px;
            display: block;
        }

        .food-name {
            font-size: 1.1rem;
            color: #964b00;
            font-weight: bold;
        }

        /* 點擊粒子特效 */
        .particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--gold);
            border-radius: 50%;
            pointer-events: none;
            z-index: 99;
        }
    </style>
</head>

<body onclick="drawOmikuji(event)">

    <div class="background" id="main-bg"></div>
    <div class="overlay-frame"></div>

    <div class="shrine-banner">
        <h1>斑馬求籤處</h1>
    </div>

    <div class="instruction">【 點擊畫面獲取今日運勢 】</div>

    <div id="result-overlay" onclick="closeResult()">
        <div class="omikuji-card" onclick="event.stopPropagation()">
            <div class="card-decoration"></div>
            <div style="color: #666; font-size: 0.8rem; letter-spacing: 5px; font-weight: bold;">黑白之間，有答案</div>
            <div id="luck-rank" class="luck-rank"></div>
            <div id="verse-content" class="verse-container"></div>
            <div class="food-box">
                <span class="food-label">✦ 今日宜吃 ✦</span>
                <div id="food-content" class="food-name"></div>
            </div>
            <p style="margin-top: 20px; color: #999; font-size: 0.7rem; letter-spacing: 1px;">點擊背景空白處以收起</p>
        </div>
    </div>

    <script>
        const omikujiGrades = ["超大吉", "大吉", "中吉", "小吉", "末吉", "吉", "平"];

        // 經典籤詩內容 (符合您要求的搜尋網址風格)
        const omikujiVerses = [
            "危險高山行過盡\n莫嫌遲慢且從容\n五行自有相生日\n寬心且看月中桂",
            "一年作事急如飛\n君爾寬心莫遲疑\n貴人自有相扶助\n如魚得水樂依依",
            "運到時來莫心急\n此籤必定見生機\n從今以後得如意\n萬事清吉不用疑",
            "看君若是誠心者\n自得名利兩雙全\n不須問我前程事\n福祿壽喜在眼前",
            "花開今已結成果\n富貴榮華終到手\n君子小人相遇會\n萬事清吉莫憂煩",
            "柳暗花明又一村\n轉念之間見生機\n誠心祈求必有應\n福德正神暗扶持"
        ];

        // 台灣特色小吃、甜點、飲料清單
        const foodList = [
            "滷肉飯", "牛肉麵", "蚵仔煎", "小籠包", "鹽酥雞",
            "珍珠奶茶", "鍋燒意麵", "剉冰", "鳳梨酥", "義大利麵",
            "泡芙", "臭豆腐", "提拉米蘇", "大腸包小腸", "披薩",
            "舒芙蕾", "雞排", "地瓜球", "紅豆餅", "煎餃"
        ];

        function drawOmikuji(e) {
            // 如果彈窗已開啟則不重複觸發
            if (document.getElementById('result-overlay').style.display === 'flex') return;

            // 產生點擊粒子特效
            createParticles(e.clientX, e.clientY);

            // 稍微放大背景增加動態感
            document.getElementById('main-bg').style.transform = "scale(1.05)";

            // 隨機選取內容
            const grade = omikujiGrades[Math.floor(Math.random() * omikujiGrades.length)];
            const verse = omikujiVerses[Math.floor(Math.random() * omikujiVerses.length)];
            const food = foodList[Math.floor(Math.random() * foodList.length)];

            document.getElementById('luck-rank').textContent = grade;
            document.getElementById('verse-content').innerText = verse;
            document.getElementById('food-content').textContent = food;

            // 顯示結果
            const overlay = document.getElementById('result-overlay');
            overlay.style.display = 'flex';
            setTimeout(() => overlay.classList.add('active'), 10);
        }

        function closeResult() {
            const overlay = document.getElementById('result-overlay');
            overlay.classList.remove('active');
            document.getElementById('main-bg').style.transform = "scale(1)";
            setTimeout(() => {
                overlay.style.display = 'none';
            }, 400);
        }

        function createParticles(x, y) {
            for (let i = 0; i < 10; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.left = x + 'px';
                p.style.top = y + 'px';
                document.body.appendChild(p);

                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 80 + 20;
                const tx = Math.cos(angle) * velocity;
                const ty = Math.sin(angle) * velocity;

                p.animate([
                    { transform: 'translate(0, 0) scale(1)', opacity: 1 },
                    { transform: `translate(${tx}px, ${ty}px) scale(0)`, opacity: 0 }
                ], { duration: 700, easing: 'ease-out' }).onfinish = () => p.remove();
            }
        }
    </script>
</body>

</html>