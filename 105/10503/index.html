<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å†¬æ—¥æœ¨å±‹ç”œé»åº—</title>
    <style>
        :root {
            --glass-white: rgba(255, 255, 255, 0.15);
            --glass-dark: rgba(0, 0, 0, 0.3);
            --accent: #d4a373; /* ç„¦ç³–éºµåŒ…è‰² */
            --gold: #ffcc00;
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            /* èƒŒæ™¯ä½¿ç”¨ä½ æä¾›çš„åœ–ç‰‡ */
            background: url('bg.jpg') no-repeat center center fixed;
            background-size: cover;
            overflow: hidden;
            color: #fff;
        }

        /* å…¨è¢å¹•èƒŒæ™¯å¾®èª¿ */
        body::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.1); /* è¼•å¾®å£“æš—èƒŒæ™¯è®“æ–‡å­—æ›´æ¸…æ¥š */
            z-index: -1;
        }

        .game-layout {
            width: 95vw;
            height: 90vh;
            display: grid;
            grid-template-columns: 300px 1fr 300px;
            gap: 20px;
            z-index: 10;
        }

        /* ç£¨ç ‚ç»ç’ƒé¢æ¿æ¨£å¼ */
        .glass-panel {
            background: var(--glass-white);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        h2, h3 {
            margin: 0;
            color: var(--gold);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding-bottom: 8px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
        }

        .stat-card {
            background: var(--glass-dark);
            padding: 10px;
            border-radius: 10px;
            font-size: 1.1em;
            border-left: 4px solid var(--accent);
        }

        .btn {
            background: var(--accent);
            color: #2d1b0d;
            border: none;
            padding: 12px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0 4px 0 #8b5e3c;
        }

        .btn:hover:not(:disabled) {
            background: #faedcd;
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #8b5e3c;
        }

        .btn:active {
            transform: translateY(2px);
            box-shadow: 0 0 0;
        }

        .btn:disabled {
            background: #666;
            box-shadow: none;
            cursor: not-allowed;
            opacity: 0.6;
        }

        /* è£½ä½œå€ */
        .center-stage {
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            padding-bottom: 50px;
        }

        .craft-table {
            width: 80%;
            text-align: center;
        }

        .step-group {
            display: flex;
            justify-content: space-around;
            background: rgba(0,0,0,0.4);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
        }

        .step-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1em;
        }

        /* è¨Šæ¯ç´€éŒ„ */
        .log-box {
            flex-grow: 1;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 10px;
            font-size: 0.85em;
            overflow-y: auto;
            max-height: 220px;
            line-height: 1.6;
            color: #eee;
            border: 1px solid rgba(255,255,255,0.1);
        }

        /* ä¸‹é›ªå‹•ç•« */
        .snow {
            position: fixed;
            top: -10px;
            color: white;
            pointer-events: none;
            z-index: 1000;
            animation: fall linear forwards;
        }

        @keyframes fall {
            to { transform: translateY(105vh); }
        }
    </style>
</head>
<body>

<div class="game-layout">
    <div class="glass-panel">
        <h2>ğŸª å°æœ¨å±‹æ«ƒæª¯</h2>
        <div class="stat-card">ğŸ’° é‡‘éŒ¢ï¼š$<span id="money">100</span></div>
        <div class="stat-card">ğŸ‘¥ å“¡å·¥ï¼š<span id="staff">0</span> å</div>
        <button class="btn" onclick="game.hire()">é›‡ç”¨å¤–å ´å“¡å·¥ ($80)</button>
        <p style="font-size: 0.8em; color: #ccc;">* å“¡å·¥æœƒè‡ªå‹•å¹«ä½ è³£å‡ºåº«å­˜è²¨ç‰©ã€‚</p>
        
        <h3>ğŸ“ ç‡Ÿæ¥­æ—¥èªŒ</h3>
        <div id="log" class="log-box">å¤–é¢æ­£åœ¨ä¸‹é›ªï¼Œæº–å‚™è¿æ¥å®¢äººå§ã€‚</div>
    </div>

    <div class="center-stage">
        <div class="glass-panel craft-table">
            <h2>ğŸ‘¨â€ğŸ³ ç”œé»å¸«å·¥ä½œå€</h2>
            <p>è«‹ä¾åºå®Œæˆæ­¥é©Ÿä¾†çµ„è£ç”œé»ï¼š</p>
            <div class="step-group">
                <label class="step-item"><input type="checkbox" id="s1" onchange="game.checkSteps()"> èª¿é…åŸæ–™</label>
                <label class="step-item"><input type="checkbox" id="s2" onchange="checkSteps()"> çƒ˜çƒ¤å¡‘å½¢</label>
                <label class="step-item"><input type="checkbox" id="s3" onchange="checkSteps()"> ç²¾ç·»è£é£¾</label>
            </div>
            <button id="makeBtn" class="btn" style="width: 100%;" disabled onclick="game.complete()">çµ„è£å®Œæˆä¸¦ä¸Šæ¶ (+$25)</button>
        </div>
    </div>

    <div class="glass-panel">
        <h2>ğŸ“¦ å€‰åº«èˆ‡é€²è²¨</h2>
        <div class="stat-card">ğŸ¥¤ é£²æ–™åº«å­˜ï¼š<span id="drinks">0</span></div>
        <button class="btn" onclick="game.buyDrinks()">æ¡è³¼é£²æ–™é€²è²¨ ($10 / 5ä»½)</button>
        <button class="btn" style="background:#8b5e3c; color:white;" onclick="game.sellDrink()">æ‰‹å‹•è³£å‡ºé£²æ–™ (+$15)</button>

        <h3>ğŸ—ï¸ å‚™è²¨ç‹€æ…‹</h3>
        <div class="stat-card">ğŸ¥§ ç”œé»æˆå“ï¼š<span id="desserts">0</span></div>
        <p style="font-size: 0.8em; color: #ccc;">(åº—å“¡å„ªå…ˆè³£å‡ºç”œé»ï¼Œå†è³£é£²æ–™)</p>
    </div>
</div>

<script>
    const game = {
        money: 100,
        staff: 0,
        drinks: 0,
        desserts: 0,

        updateUI() {
            document.getElementById('money').innerText = this.money;
            document.getElementById('staff').innerText = this.staff;
            document.getElementById('drinks').innerText = this.drinks;
            document.getElementById('desserts').innerText = this.desserts;
        },

        addLog(msg) {
            const logBox = document.getElementById('log');
            logBox.innerHTML = `<div>> ${msg}</div>` + logBox.innerHTML;
        },

        checkSteps() {
            const s1 = document.getElementById('s1').checked;
            const s2 = document.getElementById('s2').checked;
            const s3 = document.getElementById('s3').checked;
            document.getElementById('makeBtn').disabled = !(s1 && s2 && s3);
        },

        complete() {
            this.desserts++;
            this.addLog("ğŸ§ å®Œæˆäº†ä¸€ä»½ç²¾ç·»ç”œé»ä¸¦æ”¾å…¥å±•ç¤ºæ«ƒï¼");
            
            // é‡ç½®å‹¾é¸
            document.getElementById('s1').checked = false;
            document.getElementById('s2').checked = false;
            document.getElementById('s3').checked = false;
            this.checkSteps();
            this.updateUI();
        },

        buyDrinks() {
            if (this.money >= 10) {
                this.money -= 10;
                this.drinks += 5;
                this.addLog("ğŸšš é£²æ–™é€²è²¨è»ŠæŠµé”ï¼Œå¢åŠ äº† 5 ä»½åº«å­˜ã€‚");
                this.updateUI();
            } else {
                this.addLog("âŒ éŒ¢ä¸å¤ äº†ï¼Œç„¡æ³•é€²è²¨...");
            }
        },

        sellDrink() {
            if (this.drinks > 0) {
                this.drinks--;
                this.money += 15;
                this.addLog("ğŸ’° æ‰‹å‹•è³£å‡ºä¸€ä»½é£²æ–™ï¼ç²å¾— $15");
                this.updateUI();
            } else {
                alert("é£²æ–™è³£å®Œäº†ï¼è«‹é€²è²¨ã€‚");
            }
        },

        hire() {
            if (this.money >= 80) {
                this.money -= 80;
                this.staff++;
                this.addLog("ğŸ‘¥ è˜è«‹äº†ä¸€ä½æ–°å“¡å·¥ï¼Œä»–æœƒè‡ªå‹•å¹«ä½ æ‹›å‘¼å®¢äººã€‚");
                this.updateUI();
            } else {
                this.addLog("âŒ è˜è«‹é‡‘ä¸è¶³...");
            }
        }
    };

    // è‡ªå‹•ç‡Ÿé‹é‚è¼¯ (å“¡å·¥æ¯ 4 ç§’å·¥ä½œä¸€æ¬¡)
    setInterval(() => {
        if (game.staff > 0) {
            if (game.desserts > 0) {
                game.desserts--;
                game.money += 25;
                game.addLog("ğŸ¤– å“¡å·¥è³£å‡ºäº†ä¸€ä»½ç”œé» (+$25)");
            } else if (game.drinks > 0) {
                game.drinks--;
                game.money += 15;
                game.addLog("ğŸ¤– å“¡å·¥è³£å‡ºäº†ä¸€ä»½é£²æ–™ (+$15)");
            }
            game.updateUI();
        }
    }, 4000);

    // ä¸‹é›ªç‰¹æ•ˆ
    function createSnow() {
        const snow = document.createElement('div');
        snow.className = 'snow';
        snow.innerHTML = 'â„';
        snow.style.left = Math.random() * 100 + 'vw';
        snow.style.opacity = Math.random();
        snow.style.fontSize = (Math.random() * 10 + 10) + 'px';
        snow.style.animationDuration = (Math.random() * 3 + 5) + 's';
        document.body.appendChild(snow);
        setTimeout(() => snow.remove(), 8000);
    }
    setInterval(createSnow, 300);

    // åˆå§‹åŒ–æ›´æ–°
    window.onload = () => game.updateUI();
</script>

</body>
</html>